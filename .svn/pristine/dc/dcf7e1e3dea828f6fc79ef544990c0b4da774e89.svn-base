var endpoint = 'http://ec2-54-64-173-140.ap-northeast-1.compute.amazonaws.com:8080/MosaicA/api';

$(function () {
// 一列あたりの画像数
var x = 10;
var y = 10;

var urllist = [];

$.ajax({
	url: endpoint + "/getImage",
	data: {imageId: "test2"},
	dataType: "xml",
	crossDomain: true,
	success: function(xml){
		$($(xml).find('child')).each(function(){
			var str = $(this).find('url').text();
			urllist.push(str);
		});
		lineUpImage(2, 30, 30, urllist);
	}
});

//console.log(size);
//urllist.length = size;
//console.log(urllist.length);

//lineUpImage(11, 30, 30, urllist);

/*
for(var i = 0; i<array.length; i++){
	//str = str + '<img src="' + array[i] + '" style="width:20px; height:20px;">';
	$("#mosaic").append('<img src="' + array[i] + '" style="width:20px; height:20px;">');
	count++;
	if(count >= x){
		$("#mosaic").append('<br>');
		count = 0
	}
}*/

//$("#mosaic").append(str);
});



// 一列の画像の数，一つの画像の横幅，一つの画像の縦幅，画像のリスト
function lineUpImage(divX, width, height, children){
	count = 0;
	for(var i = 0; i < children.length; i++){
		$("#mosaic").append('<img src="' + children[i] + '" style="width:' + width + 'px; height:' + height +'px;">');
		count++;
		if(count >= divX){
			$("#mosaic").append('<br>');
			count = 0;
		}
	}
}